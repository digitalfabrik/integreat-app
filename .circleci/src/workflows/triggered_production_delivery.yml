when:
  and:
    - << pipeline.parameters.api_triggered >>
    - << pipeline.parameters.production_delivery >>
jobs:
  - bump_version

  - build_web:
      requires:
        - bump_version
  - deliver_web:
      production_delivery: true
      requires:
        - build_web
  - notify_web:
      requires:
        - deliver_web

  - check_native:
      requires:
        - bump_version

  - build_android:
      build_for_delivery: true
      requires:
        - check_native
  - e2e_android:
      requires:
        - build_android
  - deliver_android:
      production_delivery: true
      requiers:
        - e2e_android
  - notify_android:
      production_delivery: true
      requires:
        - deliver_android

  - build_ios:
      build_for_delivery: true
      requires:
        - check_native
  - e2e_ios:
      requires:
        - build_ios
  - deliver_ios:
      production_delivery: true
      requiers:
        - e2e_ios
  - notify_ios:
      production_delivery: true
      requires:
        - deliver_ios

  - move_release_notes:
      requires:
        - notify_web
        - notify_android
        - notify_ios
