unless: << pipeline.parameters.api_triggered >>
jobs:
  - bump_version:
      context:
        - slack-app
      delivery: none

  - check_web:
      context:
        - slack-app
      requires:
        - bump_version
  - deliver_web:
      filters:
        branches:
          only:
            - main
      context:
        - slack-app
      production_delivery: false
      requires:
        - check_web

  - check_native:
      context:
        - slack-app
      requires:
        - bump_version

  - build_android:
      name: build_e2e_android
      context:
        - slack-app
        - tuerantuer-google-play
        - tuerantuer-android
      requires:
        - bump_version
  - e2e_android:
      context:
        - slack-app
        - browserstack
      requires:
        - build_e2e_android

  - build_ios:
      name: build_e2e_ios
      context:
        - slack-app
        - tuerantuer-apple
        - tuerantuer-ios
      requires:
        - bump_version
  - e2e_ios:
      context:
        - slack-app
        - browserstack
      requires:
        - build_e2e_ios
