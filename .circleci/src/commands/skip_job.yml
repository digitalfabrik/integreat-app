description: Skips the current build if neccassary
parameters:
  build_config_name:
    type: enum
    enum: [integreat, malte, integreat-e2e, integreat-test-cms, "all"]
    default: "all"
steps:
  - run:
      command: |        
        function skip_job {
          variable_name=$1
          if [[ -n ${!variable_name} ]]; then
            echo "This job is skipped because the variable $variable_name is set"
            circleci step halt
            exit 0
          fi
        }
        
        skip_job "SKIP_JOB_$CIRCLE_JOB"
        skip_job "SKIP_JOB_<< parameters.build_config_name >>_$CIRCLE_JOB"

