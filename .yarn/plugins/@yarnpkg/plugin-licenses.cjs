/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-licenses",
factory: function (require) {
"use strict";var plugin=(()=>{var ts=Object.create;var It=Object.defineProperty;var es=Object.getOwnPropertyDescriptor;var ss=Object.getOwnPropertyNames;var is=Object.getPrototypeOf,rs=Object.prototype.hasOwnProperty;var ns=(e,t,s)=>t in e?It(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var H=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,s)=>(typeof require<"u"?require:t)[s]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var St=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Qt=(e,t)=>{for(var s in t)It(e,s,{get:t[s],enumerable:!0})},we=(e,t,s,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ss(t))!rs.call(e,n)&&n!==s&&It(e,n,{get:()=>t[n],enumerable:!(i=es(t,n))||i.enumerable});return e};var se=(e,t,s)=>(s=e!=null?ts(is(e)):{},we(t||!e||!e.__esModule?It(s,"default",{value:e,enumerable:!0}):s,e)),os=e=>we(It({},"__esModule",{value:!0}),e);var U=(e,t,s)=>(ns(e,typeof t!="symbol"?t+"":t,s),s),ie=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var r=(e,t,s)=>(ie(e,t,"read from private field"),s?s.call(e):t.get(e)),p=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},u=(e,t,s,i)=>(ie(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),Gt=(e,t,s,i)=>({set _(n){u(e,t,n,s)},get _(){return r(e,t,i)}}),c=(e,t,s)=>(ie(e,t,"access private method"),s);var xe=St((exports,module)=>{"use strict";(function(root){var performance=(typeof window=="object"?window:H("perf_hooks")).performance,BREAK=`\r
`,SPACE=" ",OPTIONS={indent:2,isExpand:!0,isStrict:!1,isEscape:!1,isUnscape:!1,keyQtMark:'"',valQtMark:'"'},ESCAPES_MAP=[{ptn:/\r\n/gm,str:""},{ptn:/\n\r/gm,str:""},{ptn:/\n/gm,str:"\\n"},{ptn:/\r/gm,str:"\\r"},{ptn://gm,str:"\\b"},{ptn://gm,str:"\\v"},{ptn:/\f/gm,str:"\\f"},{ptn:/\t/gm,str:"\\t"}],MESSAGES_MAP={err:function(){return"Parse Error, an excessive abnormal Json!"},war:function(t){return"Formated ".concat(t," lines, abnormal JSON source!")},scc:function(t){return"Success formated ".concat(t," lines!")},val:function(t){return"Invalid value in line: ".concat(t)},ost:function(t){return"Expect a string in line: ".concat(t)},col:function(t){return"Expect a colon in line: ".concat(t)},end:function(t,s){return'Expect a comma or a "'.concat(s,'" in line: ').concat(t)}};function fmt2json(source,options){var startTime=performance.now(),fmtSource=source,curLevel=0,curIndex=1,exceptType="",exceptSign="",signsQueue="",baseIndent="",isSrcValid=!0,isFmtError=!1,withDetails=!1,fmtResult="",fmtType="info",fmtSign="",fmtLines=0,message="",errFormat=!1,errNear="",errIndex=NaN,errExpect="",fmtOptions=Object.assign({},OPTIONS);options&&(typeof options.withDetails=="boolean"&&(withDetails=options.withDetails),typeof options.expand=="boolean"&&(fmtOptions.isExpand=options.expand),typeof options.strict=="boolean"&&(fmtOptions.isStrict=options.strict),typeof options.escape=="boolean"&&(fmtOptions.isEscape=options.escape),typeof options.unscape=="boolean"&&(fmtOptions.isUnscape=options.unscape),typeof options.indent=="number"&&options.indent>0&&(fmtOptions.indent=options.indent),["'",'"',""].indexOf(options.keyQtMark)>-1&&(fmtOptions.keyQtMark=options.keyQtMark),["'",'"'].indexOf(options.valQtMark)>-1&&(fmtOptions.valQtMark=options.valQtMark)),baseIndent=getBaseIndent();try{try{fmtSource!==""&&eval("fmtSource = ".concat(fmtSource)),fmtSource===""||["object","boolean"].indexOf(typeof fmtSource)>-1?doNormalFormat(fmtSource):(fmtOptions.isUnscape&&(fmtSource=fmtSource.replace(/\\"/gm,'"').replace(/\\\\/gm,"\\")),doSpecialFormat())}catch(e){fmtOptions.isUnscape&&(fmtSource=fmtSource.replace(/\\"/gm,'"').replace(/\\\\/gm,"\\")),doSpecialFormat()}}catch(e){isFmtError=!0}finally{return setFmtStatus(),withDetails?{result:fmtResult,fmtType,fmtSign,fmtLines,fmtTime:performance.now()-startTime,message,errFormat,errIndex,errNear,errExpect}:fmtResult}function doNormalFormat(e){if([!0,!1,null,""].indexOf(e)>-1)return fmtResult+=String(e);fmtOptions.isStrict&&(e=JSON.parse(JSON.stringify(e))),e instanceof Array?arrayHandler(e):objectHandler(e)}function arrayHandler(e){var t;if(e.length>0){fmtResult+=brkLine4Normal("["),fmtOptions.isExpand&&curIndex++,curLevel++;for(var s=0;s<e.length;s++)t=fmtOptions.isExpand?getCurIndent():"",fmtResult+=t,valueHandler(e[s]),fmtResult+=brkLine4Normal(s<e.length-1?",":"");curLevel--,t=fmtOptions.isExpand?getCurIndent():"",fmtResult+=t+"]"}else fmtResult+="[]"}function objectHandler(e){var t=Object.keys(e);if(t.length>0){var s,i=0;fmtResult+=brkLine4Normal("{"),curLevel++;for(var n in e){i++;var o=quoteNormalStr(n,fmtOptions.keyQtMark);s=fmtOptions.isExpand?getCurIndent():"",fmtResult+=s,fmtResult+=o,fmtResult+=fmtOptions.isExpand?": ":":",valueHandler(e[n]),fmtResult+=brkLine4Normal(i<t.length?",":"")}curLevel--,s=fmtOptions.isExpand?getCurIndent():"",fmtResult+=s+"}"}else fmtResult+="{}"}function valueHandler(e){switch(typeof e){case"undefined":case"function":return fmtResult+=String(e);case"number":case"boolean":return fmtResult+=e;case"object":return doNormalFormat(e);case"string":return fmtResult+=quoteNormalStr(e,fmtOptions.valQtMark)}}function doSpecialFormat(){if(fmtSource=fmtSource.replace(/^\s*/,""),fmtSource.length!==0){var e=!1;switch(fmtSource[0]){case"'":case'"':e=!0,quotaHandler();break;case":":e=!0,colonHandler();break;case",":e=!0,commaHandler();break;case"{":e=!0,objPreHandler();break;case"}":e=!0,objEndHandler();break;case"[":e=!0,arrPreHandler();break;case"]":e=!0,arrEndHandler();break;case"(":e=!0,tupPreHandler();break;case")":e=!0,tupEndHandler();break}if(!e){var t=fmtSource.match(/^u(\s)?'|^u(\s)?"/);t&&(e=!0,unicHandler(t[0]))}if(!e){var s=fmtSource.match(/^(-?[0-9]+\.?[0-9]*|0[xX][0-9a-fA-F]+)/);s&&(e=!0,numbHandler(s[0]))}if(!e){var i=fmtSource.match(/^(true|false|True|False)/);i&&(e=!0,boolHandler(i[0]))}if(!e){var n=fmtSource.match(/^(null|undefined|None|NaN)/);n&&(e=!0,nullHandler(n[0]))}return e||otheHandler(),doSpecialFormat()}}function quotaHandler(){var e=getSrcRest(),t=getNextQuotaIndex(fmtSource[0],e);chkFmtExpect(fmtSource[0]);var s=fmtSource.substr(0,1),i=exceptType==="ost",n="";t>-1?(n=fmtSource.substr(1,t),fmtResult+=quoteSpecialStr(n,s,i),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest(t+2)):(n=fmtSource.substr(1),fmtResult+=quoteSpecialStr(n,s,i),setFmtExpect("!"),fmtSource="")}function colonHandler(){fmtResult+=fmtOptions.isExpand?": ":":",chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest()}function commaHandler(){var e=getCurIndent();fmtOptions.isExpand&&curIndex++,fmtResult+=fmtOptions.isExpand?",".concat(BREAK+e):",",chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest(),fmtSource.replace(/(\r)?\n|\s/gm,"")===""&&setFmtError("val")}function objPreHandler(){chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource[1]&&fmtSource[1]==="}"?(fmtResult+="{}",setFmtExpect("}"),fmtSource=getSrcRest(2)):(curLevel++,fmtResult+="{",brkLine4Special(),fmtSource=getSrcRest())}function objEndHandler(){curLevel--,brkLine4Special("}"),chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest()}function arrPreHandler(){chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource[1]&&fmtSource[1]==="]"?(fmtResult+="[]",setFmtExpect("]"),fmtSource=getSrcRest(2)):(curLevel++,fmtResult+="[",brkLine4Special(),fmtSource=getSrcRest())}function arrEndHandler(){curLevel--,brkLine4Special("]"),chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest()}function tupPreHandler(){chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource[1]&&fmtSource[1]===")"?(fmtResult+=fmtOptions.isStrict?"[]":"()",setFmtExpect(")"),fmtSource=getSrcRest(2)):(curLevel++,fmtResult+=fmtOptions.isStrict?"[":"(",brkLine4Special(),fmtSource=getSrcRest())}function tupEndHandler(){curLevel--,brkLine4Special(fmtOptions.isStrict?"]":")"),chkFmtExpect(fmtSource[0]),setFmtExpect(fmtSource[0]),fmtSource=getSrcRest()}function unicHandler(e){var t=getSrcRest(e.length),s=e.indexOf("'")>-1?getNextQuotaIndex("'",t):getNextQuotaIndex('"',t);chkFmtExpect("u");var i=exceptType==="ost",n="";if(s>-1){var o=s+e.length+1;n=fmtSource.substr(e.length,o-e.length-1),fmtResult+=quoteSpecialStr(n,e,i),setFmtExpect("u"),fmtSource=getSrcRest(o)}else n=fmtSource.substr(e.length),fmtResult+=quoteSpecialStr(n,e,i),setFmtExpect("!"),fmtSource=""}function numbHandler(e){fmtResult+=e,chkFmtExpect("n"),setFmtExpect("n"),fmtSource=getSrcRest(e.length)}function boolHandler(e){fmtResult+=fmtOptions.isStrict?e.toLowerCase():e,chkFmtExpect("b"),setFmtExpect("b"),fmtSource=getSrcRest(e.length)}function nullHandler(e){fmtResult+=fmtOptions.isStrict?"null":e,chkFmtExpect("N"),setFmtExpect("N"),fmtSource=getSrcRest(e.length)}function otheHandler(){var e=fmtSource.match(/^[^\{\}\[\]\(\):,]*/),t=e&&e[0]||"";t&&(fmtResult+=t,chkFmtExpect("!"),fmtSource=getSrcRest(t.length))}function chkFmtExpect(e){if(isSrcValid)switch(exceptType){case"val":":,}])!".indexOf(e)>-1&&setFmtError("val");break;case"ost":`'"unbN`.indexOf(e)===-1&&setFmtError("ost");break;case"end":var t=getBracketPair(exceptSign);[",",t].indexOf(e)===-1&&setFmtError("end",t);break;case"col":e!==":"&&setFmtError("col");break}}function setFmtExpect(e){switch(e){case":":exceptType="val";break;case",":exceptSign==="{"?exceptType="ost":exceptType="val";break;case"{":exceptSign=e,signsQueue+=e,exceptType="ost";break;case"}":signsQueue=signsQueue.substr(0,signsQueue.length-1),exceptSign=signsQueue.substr(-1),exceptType="end";break;case"[":exceptSign=e,signsQueue+=e,exceptType="val";break;case"]":signsQueue=signsQueue.substr(0,signsQueue.length-1),exceptSign=signsQueue.substr(-1),exceptType="end";break;case"(":exceptSign=e,signsQueue+=e,exceptType="val";break;case")":signsQueue=signsQueue.substr(0,signsQueue.length-1),exceptSign=signsQueue.substr(-1),exceptType="end";break;case"u":case"n":case"b":case"N":case'"':case"'":exceptType==="ost"?exceptType="col":exceptType="end";break}}function setFmtError(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";switch(e){case"war":fmtType="warning";break;case"scc":fmtType="success";break;default:fmtType="danger";break}if(["ost","col","val","end"].indexOf(e)>-1){errFormat=!0,isSrcValid=!1,errExpect=t,errIndex=curIndex;var s=fmtResult.substr(-20).replace(/^(\s|\n|\r\n)*/,"").replace(/(\n|\r\n)/gm,"\\n"),i=fmtSource.substr(0,10).replace(/(\s|\n|\r\n)*$/,"").replace(/(\n|\r\n)/gm,"\\n");errNear="...".concat(s,">>>>>>").concat(i)}fmtSign=e,message=MESSAGES_MAP[e](curIndex,t)}function setFmtStatus(){if(isFmtError&&!errIndex)setFmtError("err"),errFormat=!0;else if(isSrcValid)if(signsQueue){var e=getBracketPair(signsQueue.substr(-1));setFmtError("end",e)}else setFmtError("scc");fmtLines=curIndex}function brkLine4Normal(e){return fmtOptions.isExpand?(curIndex++,e+BREAK):e}function brkLine4Special(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(!fmtOptions.isExpand)return fmtResult+=e;curIndex++,fmtResult+=BREAK+getCurIndent()+e}function quoteNormalStr(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=fmtOptions.isEscape&&fmtOptions.keyQtMark==='"'&&t==='"'&&(!s||fmtOptions.isStrict);e=s?e.replace(/(?!\\[b|f|n|\\|r|t|x|v|'|"|0])\\/gm,"\\\\"):e.replace(/\\/gm,"\\\\"),ESCAPES_MAP.forEach(function(o){return e=e.replace(o.ptn,o.str)});var n=i?"\\".concat(t):t;switch(i&&(e=e.replace(/\\/gm,"\\\\")),t){case'"':return e=i?e.replace(/"/gm,'\\\\\\"'):e.replace(/"/gm,'\\"'),n+e+n;case"'":return e=e.replace(/'/gm,"\\'"),n+e+n;default:return e}}function quoteSpecialStr(e,t,s){var i=s?fmtOptions.keyQtMark:fmtOptions.valQtMark;return e=e.replace(/(?!\\[b|f|n|\\|r|t|x|v|'|"|0])\\/gm,""),e=e.replace(/\\\"/gm,'"'),e=e.replace(/\\\'/gm,"'"),e=quoteNormalStr(e,i,!0),!fmtOptions.isStrict&&t.length>1&&(e=t.substr(0,t.length-1)+e),e}function getSrcRest(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return fmtSource.length>e?fmtSource.substr(e):""}function getNextQuotaIndex(e,t){for(var s=0;s<t.length;s++)if(t[s]===e&&(s===0||t[s-1]!=="\\"||t[s-1]==="\\"&&t[s-2]==="\\"&&t[s-3]!=="\\"))return s;return-1}function getBaseIndent(){for(var e="",t=0;t<fmtOptions.indent;t++)e+=SPACE;return e}function getCurIndent(){for(var e="",t=0;t<curLevel;t++)e+=baseIndent;return e}function getBracketPair(e){var t=["{","[","("],s=["}","]",")"],i=t.indexOf(e),n=s.indexOf(e);return i>-1?s[i]:t[n]}}typeof define=="function"&&define.amd?define(function(){return fmt2json}):typeof exports=="object"?module.exports=fmt2json:root.fmt2json=fmt2json})(exports)});var Ee=St((Is,ve)=>{ve.exports=xe()});var Re=St(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.LRUCache=void 0;var Nt=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Pe=new Set,re=typeof process=="object"&&!!process?process:{},ke=(e,t,s,i)=>{typeof re.emitWarning=="function"?re.emitWarning(e,t,s,i):console.error(`[${s}] ${t}: ${e}`)},Jt=globalThis.AbortController,$e=globalThis.AbortSignal,Oe;if(typeof Jt>"u"){$e=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,n){this._onabort.push(n)}},Jt=class{constructor(){t()}signal=new $e;abort(i){var n,o;if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let a of this.signal._onabort)a(i);(o=(n=this.signal).onabort)==null||o.call(n,i)}}};let e=((Oe=re.env)==null?void 0:Oe.LRU_CACHE_IGNORE_AC_WARNING)!=="1",t=()=>{!e||(e=!1,ke("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var as=e=>!Pe.has(e),Hs=Symbol("type"),ct=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),Fe=e=>ct(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Ot:null:null,Ot=class extends Array{constructor(t){super(t),this.fill(0)}},Pt,$t=class{heap;length;static create(t){let s=Fe(t);if(!s)return[];u($t,Pt,!0);let i=new $t(t,s);return u($t,Pt,!1),i}constructor(t,s){if(!r($t,Pt))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new s(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},Bt=$t;Pt=new WeakMap,p(Bt,Pt,!1);var V,Q,Y,J,kt,R,K,T,v,m,z,G,j,I,X,N,rt,nt,Z,q,ft,W,Ht,oe,bt,ot,Dt,B,Kt,Ae,yt,Ft,Ut,tt,lt,et,ht,jt,ae,At,Vt,Rt,Yt,x,O,zt,ce,wt,Ct,le=class{constructor(t){p(this,Ht);p(this,Kt);p(this,tt);p(this,et);p(this,jt);p(this,At);p(this,Rt);p(this,x);p(this,zt);p(this,wt);p(this,V,void 0);p(this,Q,void 0);p(this,Y,void 0);p(this,J,void 0);p(this,kt,void 0);U(this,"ttl");U(this,"ttlResolution");U(this,"ttlAutopurge");U(this,"updateAgeOnGet");U(this,"updateAgeOnHas");U(this,"allowStale");U(this,"noDisposeOnSet");U(this,"noUpdateTTL");U(this,"maxEntrySize");U(this,"sizeCalculation");U(this,"noDeleteOnFetchRejection");U(this,"noDeleteOnStaleGet");U(this,"allowStaleOnFetchAbort");U(this,"allowStaleOnFetchRejection");U(this,"ignoreFetchAbort");p(this,R,void 0);p(this,K,void 0);p(this,T,void 0);p(this,v,void 0);p(this,m,void 0);p(this,z,void 0);p(this,G,void 0);p(this,j,void 0);p(this,I,void 0);p(this,X,void 0);p(this,N,void 0);p(this,rt,void 0);p(this,nt,void 0);p(this,Z,void 0);p(this,q,void 0);p(this,ft,void 0);p(this,W,void 0);p(this,bt,()=>{});p(this,ot,()=>{});p(this,Dt,()=>{});p(this,B,()=>!1);p(this,yt,t=>{});p(this,Ft,(t,s,i)=>{});p(this,Ut,(t,s,i,n)=>{if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:s=0,ttl:i,ttlResolution:n=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:f,dispose:d,disposeAfter:E,noDisposeOnSet:g,noUpdateTTL:k,maxSize:$=0,maxEntrySize:C=0,sizeCalculation:y,fetchMethod:P,noDeleteOnFetchRejection:h,noDeleteOnStaleGet:w,allowStaleOnFetchRejection:A,allowStaleOnFetchAbort:L,ignoreFetchAbort:M}=t;if(s!==0&&!ct(s))throw new TypeError("max option must be a nonnegative integer");let gt=s?Fe(s):Array;if(!gt)throw new Error("invalid max value: "+s);if(u(this,V,s),u(this,Q,$),this.maxEntrySize=C||r(this,Q),this.sizeCalculation=y,this.sizeCalculation){if(!r(this,Q)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(P!==void 0&&typeof P!="function")throw new TypeError("fetchMethod must be a function if specified");if(u(this,kt,P),u(this,ft,!!P),u(this,T,new Map),u(this,v,new Array(s).fill(void 0)),u(this,m,new Array(s).fill(void 0)),u(this,z,new gt(s)),u(this,G,new gt(s)),u(this,j,0),u(this,I,0),u(this,X,Bt.create(s)),u(this,R,0),u(this,K,0),typeof d=="function"&&u(this,Y,d),typeof E=="function"?(u(this,J,E),u(this,N,[])):(u(this,J,void 0),u(this,N,void 0)),u(this,q,!!r(this,Y)),u(this,W,!!r(this,J)),this.noDisposeOnSet=!!g,this.noUpdateTTL=!!k,this.noDeleteOnFetchRejection=!!h,this.allowStaleOnFetchRejection=!!A,this.allowStaleOnFetchAbort=!!L,this.ignoreFetchAbort=!!M,this.maxEntrySize!==0){if(r(this,Q)!==0&&!ct(r(this,Q)))throw new TypeError("maxSize must be a positive integer if specified");if(!ct(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");c(this,Kt,Ae).call(this)}if(this.allowStale=!!f,this.noDeleteOnStaleGet=!!w,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=ct(n)||n===0?n:1,this.ttlAutopurge=!!o,this.ttl=i||0,this.ttl){if(!ct(this.ttl))throw new TypeError("ttl must be a positive integer if specified");c(this,Ht,oe).call(this)}if(r(this,V)===0&&this.ttl===0&&r(this,Q)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!r(this,V)&&!r(this,Q)){let at="LRU_CACHE_UNBOUNDED";as(at)&&(Pe.add(at),ke("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",at,le))}}static unsafeExposeInternals(t){return{starts:r(t,nt),ttls:r(t,Z),sizes:r(t,rt),keyMap:r(t,T),keyList:r(t,v),valList:r(t,m),next:r(t,z),prev:r(t,G),get head(){return r(t,j)},get tail(){return r(t,I)},free:r(t,X),isBackgroundFetch:s=>{var i;return c(i=t,x,O).call(i,s)},backgroundFetch:(s,i,n,o)=>{var a;return c(a=t,Rt,Yt).call(a,s,i,n,o)},moveToTail:s=>{var i;return c(i=t,wt,Ct).call(i,s)},indexes:s=>{var i;return c(i=t,tt,lt).call(i,s)},rindexes:s=>{var i;return c(i=t,et,ht).call(i,s)},isStale:s=>{var i;return r(i=t,B).call(i,s)}}}get max(){return r(this,V)}get maxSize(){return r(this,Q)}get calculatedSize(){return r(this,K)}get size(){return r(this,R)}get fetchMethod(){return r(this,kt)}get dispose(){return r(this,Y)}get disposeAfter(){return r(this,J)}getRemainingTTL(t){return r(this,T).has(t)?1/0:0}*entries(){for(let t of c(this,tt,lt).call(this))r(this,m)[t]!==void 0&&r(this,v)[t]!==void 0&&!c(this,x,O).call(this,r(this,m)[t])&&(yield[r(this,v)[t],r(this,m)[t]])}*rentries(){for(let t of c(this,et,ht).call(this))r(this,m)[t]!==void 0&&r(this,v)[t]!==void 0&&!c(this,x,O).call(this,r(this,m)[t])&&(yield[r(this,v)[t],r(this,m)[t]])}*keys(){for(let t of c(this,tt,lt).call(this)){let s=r(this,v)[t];s!==void 0&&!c(this,x,O).call(this,r(this,m)[t])&&(yield s)}}*rkeys(){for(let t of c(this,et,ht).call(this)){let s=r(this,v)[t];s!==void 0&&!c(this,x,O).call(this,r(this,m)[t])&&(yield s)}}*values(){for(let t of c(this,tt,lt).call(this))r(this,m)[t]!==void 0&&!c(this,x,O).call(this,r(this,m)[t])&&(yield r(this,m)[t])}*rvalues(){for(let t of c(this,et,ht).call(this))r(this,m)[t]!==void 0&&!c(this,x,O).call(this,r(this,m)[t])&&(yield r(this,m)[t])}[Symbol.iterator](){return this.entries()}find(t,s={}){for(let i of c(this,tt,lt).call(this)){let n=r(this,m)[i],o=c(this,x,O).call(this,n)?n.__staleWhileFetching:n;if(o!==void 0&&t(o,r(this,v)[i],this))return this.get(r(this,v)[i],s)}}forEach(t,s=this){for(let i of c(this,tt,lt).call(this)){let n=r(this,m)[i],o=c(this,x,O).call(this,n)?n.__staleWhileFetching:n;o!==void 0&&t.call(s,o,r(this,v)[i],this)}}rforEach(t,s=this){for(let i of c(this,et,ht).call(this)){let n=r(this,m)[i],o=c(this,x,O).call(this,n)?n.__staleWhileFetching:n;o!==void 0&&t.call(s,o,r(this,v)[i],this)}}purgeStale(){let t=!1;for(let s of c(this,et,ht).call(this,{allowStale:!0}))r(this,B).call(this,s)&&(this.delete(r(this,v)[s]),t=!0);return t}dump(){let t=[];for(let s of c(this,tt,lt).call(this,{allowStale:!0})){let i=r(this,v)[s],n=r(this,m)[s],o=c(this,x,O).call(this,n)?n.__staleWhileFetching:n;if(o===void 0||i===void 0)continue;let a={value:o};if(r(this,Z)&&r(this,nt)){a.ttl=r(this,Z)[s];let l=Nt.now()-r(this,nt)[s];a.start=Math.floor(Date.now()-l)}r(this,rt)&&(a.size=r(this,rt)[s]),t.unshift([i,a])}return t}load(t){this.clear();for(let[s,i]of t){if(i.start){let n=Date.now()-i.start;i.start=Nt.now()-n}this.set(s,i.value,i)}}set(t,s,i={}){var k,$,C,y,P;if(s===void 0)return this.delete(t),this;let{ttl:n=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:f}=i,{noUpdateTTL:d=this.noUpdateTTL}=i,E=r(this,Ut).call(this,t,s,i.size||0,l);if(this.maxEntrySize&&E>this.maxEntrySize)return f&&(f.set="miss",f.maxEntrySizeExceeded=!0),this.delete(t),this;let g=r(this,R)===0?void 0:r(this,T).get(t);if(g===void 0)g=r(this,R)===0?r(this,I):r(this,X).length!==0?r(this,X).pop():r(this,R)===r(this,V)?c(this,At,Vt).call(this,!1):r(this,R),r(this,v)[g]=t,r(this,m)[g]=s,r(this,T).set(t,g),r(this,z)[r(this,I)]=g,r(this,G)[g]=r(this,I),u(this,I,g),Gt(this,R)._++,r(this,Ft).call(this,g,E,f),f&&(f.set="add"),d=!1;else{c(this,wt,Ct).call(this,g);let h=r(this,m)[g];if(s!==h){if(r(this,ft)&&c(this,x,O).call(this,h)){h.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:w}=h;w!==void 0&&!a&&(r(this,q)&&((k=r(this,Y))==null||k.call(this,w,t,"set")),r(this,W)&&(($=r(this,N))==null||$.push([w,t,"set"])))}else a||(r(this,q)&&((C=r(this,Y))==null||C.call(this,h,t,"set")),r(this,W)&&((y=r(this,N))==null||y.push([h,t,"set"])));if(r(this,yt).call(this,g),r(this,Ft).call(this,g,E,f),r(this,m)[g]=s,f){f.set="replace";let w=h&&c(this,x,O).call(this,h)?h.__staleWhileFetching:h;w!==void 0&&(f.oldValue=w)}}else f&&(f.set="update")}if(n!==0&&!r(this,Z)&&c(this,Ht,oe).call(this),r(this,Z)&&(d||r(this,Dt).call(this,g,n,o),f&&r(this,ot).call(this,f,g)),!a&&r(this,W)&&r(this,N)){let h=r(this,N),w;for(;w=h==null?void 0:h.shift();)(P=r(this,J))==null||P.call(this,...w)}return this}pop(){var t;try{for(;r(this,R);){let s=r(this,m)[r(this,j)];if(c(this,At,Vt).call(this,!0),c(this,x,O).call(this,s)){if(s.__staleWhileFetching)return s.__staleWhileFetching}else if(s!==void 0)return s}}finally{if(r(this,W)&&r(this,N)){let s=r(this,N),i;for(;i=s==null?void 0:s.shift();)(t=r(this,J))==null||t.call(this,...i)}}}has(t,s={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:n}=s,o=r(this,T).get(t);if(o!==void 0){let a=r(this,m)[o];if(c(this,x,O).call(this,a)&&a.__staleWhileFetching===void 0)return!1;if(r(this,B).call(this,o))n&&(n.has="stale",r(this,ot).call(this,n,o));else return i&&r(this,bt).call(this,o),n&&(n.has="hit",r(this,ot).call(this,n,o)),!0}else n&&(n.has="miss");return!1}peek(t,s={}){let{allowStale:i=this.allowStale}=s,n=r(this,T).get(t);if(n!==void 0&&(i||!r(this,B).call(this,n))){let o=r(this,m)[n];return c(this,x,O).call(this,o)?o.__staleWhileFetching:o}}async fetch(t,s={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:f=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:E=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:k=this.allowStaleOnFetchRejection,ignoreFetchAbort:$=this.ignoreFetchAbort,allowStaleOnFetchAbort:C=this.allowStaleOnFetchAbort,context:y,forceRefresh:P=!1,status:h,signal:w}=s;if(!r(this,ft))return h&&(h.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:o,status:h});let A={allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:l,size:f,sizeCalculation:d,noUpdateTTL:E,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:k,allowStaleOnFetchAbort:C,ignoreFetchAbort:$,status:h,signal:w},L=r(this,T).get(t);if(L===void 0){h&&(h.fetch="miss");let M=c(this,Rt,Yt).call(this,t,L,A,y);return M.__returned=M}else{let M=r(this,m)[L];if(c(this,x,O).call(this,M)){let ye=i&&M.__staleWhileFetching!==void 0;return h&&(h.fetch="inflight",ye&&(h.returnedStale=!0)),ye?M.__staleWhileFetching:M.__returned=M}let gt=r(this,B).call(this,L);if(!P&&!gt)return h&&(h.fetch="hit"),c(this,wt,Ct).call(this,L),n&&r(this,bt).call(this,L),h&&r(this,ot).call(this,h,L),M;let at=c(this,Rt,Yt).call(this,t,L,A,y),be=at.__staleWhileFetching!==void 0&&i;return h&&(h.fetch=gt?"stale":"refresh",be&&gt&&(h.returnedStale=!0)),be?at.__staleWhileFetching:at.__returned=at}}get(t,s={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=s,l=r(this,T).get(t);if(l!==void 0){let f=r(this,m)[l],d=c(this,x,O).call(this,f);return a&&r(this,ot).call(this,a,l),r(this,B).call(this,l)?(a&&(a.get="stale"),d?(a&&i&&f.__staleWhileFetching!==void 0&&(a.returnedStale=!0),i?f.__staleWhileFetching:void 0):(o||this.delete(t),a&&i&&(a.returnedStale=!0),i?f:void 0)):(a&&(a.get="hit"),d?f.__staleWhileFetching:(c(this,wt,Ct).call(this,l),n&&r(this,bt).call(this,l),f))}else a&&(a.get="miss")}delete(t){var i,n,o,a;let s=!1;if(r(this,R)!==0){let l=r(this,T).get(t);if(l!==void 0)if(s=!0,r(this,R)===1)this.clear();else{r(this,yt).call(this,l);let f=r(this,m)[l];c(this,x,O).call(this,f)?f.__abortController.abort(new Error("deleted")):(r(this,q)||r(this,W))&&(r(this,q)&&((i=r(this,Y))==null||i.call(this,f,t,"delete")),r(this,W)&&((n=r(this,N))==null||n.push([f,t,"delete"]))),r(this,T).delete(t),r(this,v)[l]=void 0,r(this,m)[l]=void 0,l===r(this,I)?u(this,I,r(this,G)[l]):l===r(this,j)?u(this,j,r(this,z)[l]):(r(this,z)[r(this,G)[l]]=r(this,z)[l],r(this,G)[r(this,z)[l]]=r(this,G)[l]),Gt(this,R)._--,r(this,X).push(l)}}if(r(this,W)&&((o=r(this,N))==null?void 0:o.length)){let l=r(this,N),f;for(;f=l==null?void 0:l.shift();)(a=r(this,J))==null||a.call(this,...f)}return s}clear(){var t,s,i;for(let n of c(this,et,ht).call(this,{allowStale:!0})){let o=r(this,m)[n];if(c(this,x,O).call(this,o))o.__abortController.abort(new Error("deleted"));else{let a=r(this,v)[n];r(this,q)&&((t=r(this,Y))==null||t.call(this,o,a,"delete")),r(this,W)&&((s=r(this,N))==null||s.push([o,a,"delete"]))}}if(r(this,T).clear(),r(this,m).fill(void 0),r(this,v).fill(void 0),r(this,Z)&&r(this,nt)&&(r(this,Z).fill(0),r(this,nt).fill(0)),r(this,rt)&&r(this,rt).fill(0),u(this,j,0),u(this,I,0),r(this,X).length=0,u(this,K,0),u(this,R,0),r(this,W)&&r(this,N)){let n=r(this,N),o;for(;o=n==null?void 0:n.shift();)(i=r(this,J))==null||i.call(this,...o)}}},ne=le;V=new WeakMap,Q=new WeakMap,Y=new WeakMap,J=new WeakMap,kt=new WeakMap,R=new WeakMap,K=new WeakMap,T=new WeakMap,v=new WeakMap,m=new WeakMap,z=new WeakMap,G=new WeakMap,j=new WeakMap,I=new WeakMap,X=new WeakMap,N=new WeakMap,rt=new WeakMap,nt=new WeakMap,Z=new WeakMap,q=new WeakMap,ft=new WeakMap,W=new WeakMap,Ht=new WeakSet,oe=function(){let t=new Ot(r(this,V)),s=new Ot(r(this,V));u(this,Z,t),u(this,nt,s),u(this,Dt,(o,a,l=Nt.now())=>{if(s[o]=a!==0?l:0,t[o]=a,a!==0&&this.ttlAutopurge){let f=setTimeout(()=>{r(this,B).call(this,o)&&this.delete(r(this,v)[o])},a+1);f.unref&&f.unref()}}),u(this,bt,o=>{s[o]=t[o]!==0?Nt.now():0}),u(this,ot,(o,a)=>{if(t[a]){let l=t[a],f=s[a];o.ttl=l,o.start=f,o.now=i||n();let d=o.now-f;o.remainingTTL=l-d}});let i=0,n=()=>{let o=Nt.now();if(this.ttlResolution>0){i=o;let a=setTimeout(()=>i=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=r(this,T).get(o);if(a===void 0)return 0;let l=t[a],f=s[a];if(l===0||f===0)return 1/0;let d=(i||n())-f;return l-d},u(this,B,o=>t[o]!==0&&s[o]!==0&&(i||n())-s[o]>t[o])},bt=new WeakMap,ot=new WeakMap,Dt=new WeakMap,B=new WeakMap,Kt=new WeakSet,Ae=function(){let t=new Ot(r(this,V));u(this,K,0),u(this,rt,t),u(this,yt,s=>{u(this,K,r(this,K)-t[s]),t[s]=0}),u(this,Ut,(s,i,n,o)=>{if(c(this,x,O).call(this,i))return 0;if(!ct(n))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(n=o(i,s),!ct(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n}),u(this,Ft,(s,i,n)=>{if(t[s]=i,r(this,Q)){let o=r(this,Q)-t[s];for(;r(this,K)>o;)c(this,At,Vt).call(this,!0)}u(this,K,r(this,K)+t[s]),n&&(n.entrySize=i,n.totalCalculatedSize=r(this,K))})},yt=new WeakMap,Ft=new WeakMap,Ut=new WeakMap,tt=new WeakSet,lt=function*({allowStale:t=this.allowStale}={}){if(r(this,R))for(let s=r(this,I);!(!c(this,jt,ae).call(this,s)||((t||!r(this,B).call(this,s))&&(yield s),s===r(this,j)));)s=r(this,G)[s]},et=new WeakSet,ht=function*({allowStale:t=this.allowStale}={}){if(r(this,R))for(let s=r(this,j);!(!c(this,jt,ae).call(this,s)||((t||!r(this,B).call(this,s))&&(yield s),s===r(this,I)));)s=r(this,z)[s]},jt=new WeakSet,ae=function(t){return t!==void 0&&r(this,T).get(r(this,v)[t])===t},At=new WeakSet,Vt=function(t){var o,a;let s=r(this,j),i=r(this,v)[s],n=r(this,m)[s];return r(this,ft)&&c(this,x,O).call(this,n)?n.__abortController.abort(new Error("evicted")):(r(this,q)||r(this,W))&&(r(this,q)&&((o=r(this,Y))==null||o.call(this,n,i,"evict")),r(this,W)&&((a=r(this,N))==null||a.push([n,i,"evict"]))),r(this,yt).call(this,s),t&&(r(this,v)[s]=void 0,r(this,m)[s]=void 0,r(this,X).push(s)),r(this,R)===1?(u(this,j,u(this,I,0)),r(this,X).length=0):u(this,j,r(this,z)[s]),r(this,T).delete(i),Gt(this,R)._--,s},Rt=new WeakSet,Yt=function(t,s,i,n){let o=s===void 0?void 0:r(this,m)[s];if(c(this,x,O).call(this,o))return o;let a=new Jt,{signal:l}=i;l==null||l.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});let f={signal:a.signal,options:i,context:n},d=(y,P=!1)=>{let{aborted:h}=a.signal,w=i.ignoreFetchAbort&&y!==void 0;if(i.status&&(h&&!P?(i.status.fetchAborted=!0,i.status.fetchError=a.signal.reason,w&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),h&&!w&&!P)return g(a.signal.reason);let A=$;return r(this,m)[s]===$&&(y===void 0?A.__staleWhileFetching?r(this,m)[s]=A.__staleWhileFetching:this.delete(t):(i.status&&(i.status.fetchUpdated=!0),this.set(t,y,f.options))),y},E=y=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=y),g(y)),g=y=>{let{aborted:P}=a.signal,h=P&&i.allowStaleOnFetchAbort,w=h||i.allowStaleOnFetchRejection,A=w||i.noDeleteOnFetchRejection,L=$;if(r(this,m)[s]===$&&(!A||L.__staleWhileFetching===void 0?this.delete(t):h||(r(this,m)[s]=L.__staleWhileFetching)),w)return i.status&&L.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),L.__staleWhileFetching;if(L.__returned===L)throw y},k=(y,P)=>{var w;let h=(w=r(this,kt))==null?void 0:w.call(this,t,o,f);h&&h instanceof Promise&&h.then(A=>y(A===void 0?void 0:A),P),a.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(y(void 0),i.allowStaleOnFetchAbort&&(y=A=>d(A,!0)))})};i.status&&(i.status.fetchDispatched=!0);let $=new Promise(k).then(d,E),C=Object.assign($,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return s===void 0?(this.set(t,C,{...f.options,status:void 0}),s=r(this,T).get(t)):r(this,m)[s]=C,C},x=new WeakSet,O=function(t){if(!r(this,ft))return!1;let s=t;return!!s&&s instanceof Promise&&s.hasOwnProperty("__staleWhileFetching")&&s.__abortController instanceof Jt},zt=new WeakSet,ce=function(t,s){r(this,G)[s]=t,r(this,z)[t]=s},wt=new WeakSet,Ct=function(t){t!==r(this,I)&&(t===r(this,j)?u(this,j,r(this,z)[t]):c(this,zt,ce).call(this,r(this,G)[t],r(this,z)[t]),c(this,zt,ce).call(this,r(this,I),t),u(this,I,t))};Xt.LRUCache=ne});var Le=St((js,_e)=>{"use strict";var S=(...e)=>e.every(t=>t)?e.join(""):"",F=e=>e?encodeURIComponent(e):"",Te=e=>e.toLowerCase().replace(/^\W+|\/|\W+$/g,"").replace(/\W+/g,"-"),cs={sshtemplate:({domain:e,user:t,project:s,committish:i})=>`git@${e}:${t}/${s}.git${S("#",i)}`,sshurltemplate:({domain:e,user:t,project:s,committish:i})=>`git+ssh://git@${e}/${t}/${s}.git${S("#",i)}`,edittemplate:({domain:e,user:t,project:s,committish:i,editpath:n,path:o})=>`https://${e}/${t}/${s}${S("/",n,"/",F(i||"HEAD"),"/",o)}`,browsetemplate:({domain:e,user:t,project:s,committish:i,treepath:n})=>`https://${e}/${t}/${s}${S("/",n,"/",F(i))}`,browsetreetemplate:({domain:e,user:t,project:s,committish:i,treepath:n,path:o,fragment:a,hashformat:l})=>`https://${e}/${t}/${s}/${n}/${F(i||"HEAD")}/${o}${S("#",l(a||""))}`,browseblobtemplate:({domain:e,user:t,project:s,committish:i,blobpath:n,path:o,fragment:a,hashformat:l})=>`https://${e}/${t}/${s}/${n}/${F(i||"HEAD")}/${o}${S("#",l(a||""))}`,docstemplate:({domain:e,user:t,project:s,treepath:i,committish:n})=>`https://${e}/${t}/${s}${S("/",i,"/",F(n))}#readme`,httpstemplate:({auth:e,domain:t,user:s,project:i,committish:n})=>`git+https://${S(e,"@")}${t}/${s}/${i}.git${S("#",n)}`,filetemplate:({domain:e,user:t,project:s,committish:i,path:n})=>`https://${e}/${t}/${s}/raw/${F(i||"HEAD")}/${n}`,shortcuttemplate:({type:e,user:t,project:s,committish:i})=>`${e}:${t}/${s}${S("#",i)}`,pathtemplate:({user:e,project:t,committish:s})=>`${e}/${t}${S("#",s)}`,bugstemplate:({domain:e,user:t,project:s})=>`https://${e}/${t}/${s}/issues`,hashformat:Te},ut={};ut.github={protocols:["git:","http:","git+ssh:","git+https:","ssh:","https:"],domain:"github.com",treepath:"tree",blobpath:"blob",editpath:"edit",filetemplate:({auth:e,user:t,project:s,committish:i,path:n})=>`https://${S(e,"@")}raw.githubusercontent.com/${t}/${s}/${F(i||"HEAD")}/${n}`,gittemplate:({auth:e,domain:t,user:s,project:i,committish:n})=>`git://${S(e,"@")}${t}/${s}/${i}.git${S("#",n)}`,tarballtemplate:({domain:e,user:t,project:s,committish:i})=>`https://codeload.${e}/${t}/${s}/tar.gz/${F(i||"HEAD")}`,extract:e=>{let[,t,s,i,n]=e.pathname.split("/",5);if(!(i&&i!=="tree")&&(i||(n=e.hash.slice(1)),s&&s.endsWith(".git")&&(s=s.slice(0,-4)),!(!t||!s)))return{user:t,project:s,committish:n}}};ut.bitbucket={protocols:["git+ssh:","git+https:","ssh:","https:"],domain:"bitbucket.org",treepath:"src",blobpath:"src",editpath:"?mode=edit",edittemplate:({domain:e,user:t,project:s,committish:i,treepath:n,path:o,editpath:a})=>`https://${e}/${t}/${s}${S("/",n,"/",F(i||"HEAD"),"/",o,a)}`,tarballtemplate:({domain:e,user:t,project:s,committish:i})=>`https://${e}/${t}/${s}/get/${F(i||"HEAD")}.tar.gz`,extract:e=>{let[,t,s,i]=e.pathname.split("/",4);if(!["get"].includes(i)&&(s&&s.endsWith(".git")&&(s=s.slice(0,-4)),!(!t||!s)))return{user:t,project:s,committish:e.hash.slice(1)}}};ut.gitlab={protocols:["git+ssh:","git+https:","ssh:","https:"],domain:"gitlab.com",treepath:"tree",blobpath:"tree",editpath:"-/edit",httpstemplate:({auth:e,domain:t,user:s,project:i,committish:n})=>`git+https://${S(e,"@")}${t}/${s}/${i}.git${S("#",n)}`,tarballtemplate:({domain:e,user:t,project:s,committish:i})=>`https://${e}/${t}/${s}/repository/archive.tar.gz?ref=${F(i||"HEAD")}`,extract:e=>{let t=e.pathname.slice(1);if(t.includes("/-/")||t.includes("/archive.tar.gz"))return;let s=t.split("/"),i=s.pop();i.endsWith(".git")&&(i=i.slice(0,-4));let n=s.join("/");if(!(!n||!i))return{user:n,project:i,committish:e.hash.slice(1)}}};ut.gist={protocols:["git:","git+ssh:","git+https:","ssh:","https:"],domain:"gist.github.com",editpath:"edit",sshtemplate:({domain:e,project:t,committish:s})=>`git@${e}:${t}.git${S("#",s)}`,sshurltemplate:({domain:e,project:t,committish:s})=>`git+ssh://git@${e}/${t}.git${S("#",s)}`,edittemplate:({domain:e,user:t,project:s,committish:i,editpath:n})=>`https://${e}/${t}/${s}${S("/",F(i))}/${n}`,browsetemplate:({domain:e,project:t,committish:s})=>`https://${e}/${t}${S("/",F(s))}`,browsetreetemplate:({domain:e,project:t,committish:s,path:i,hashformat:n})=>`https://${e}/${t}${S("/",F(s))}${S("#",n(i))}`,browseblobtemplate:({domain:e,project:t,committish:s,path:i,hashformat:n})=>`https://${e}/${t}${S("/",F(s))}${S("#",n(i))}`,docstemplate:({domain:e,project:t,committish:s})=>`https://${e}/${t}${S("/",F(s))}`,httpstemplate:({domain:e,project:t,committish:s})=>`git+https://${e}/${t}.git${S("#",s)}`,filetemplate:({user:e,project:t,committish:s,path:i})=>`https://gist.githubusercontent.com/${e}/${t}/raw${S("/",F(s))}/${i}`,shortcuttemplate:({type:e,project:t,committish:s})=>`${e}:${t}${S("#",s)}`,pathtemplate:({project:e,committish:t})=>`${e}${S("#",t)}`,bugstemplate:({domain:e,project:t})=>`https://${e}/${t}`,gittemplate:({domain:e,project:t,committish:s})=>`git://${e}/${t}.git${S("#",s)}`,tarballtemplate:({project:e,committish:t})=>`https://codeload.github.com/gist/${e}/tar.gz/${F(t||"HEAD")}`,extract:e=>{let[,t,s,i]=e.pathname.split("/",4);if(i!=="raw"){if(!s){if(!t)return;s=t,t=null}return s.endsWith(".git")&&(s=s.slice(0,-4)),{user:t,project:s,committish:e.hash.slice(1)}}},hashformat:function(e){return e&&"file-"+Te(e)}};ut.sourcehut={protocols:["git+ssh:","https:"],domain:"git.sr.ht",treepath:"tree",blobpath:"tree",filetemplate:({domain:e,user:t,project:s,committish:i,path:n})=>`https://${e}/${t}/${s}/blob/${F(i)||"HEAD"}/${n}`,httpstemplate:({domain:e,user:t,project:s,committish:i})=>`https://${e}/${t}/${s}.git${S("#",i)}`,tarballtemplate:({domain:e,user:t,project:s,committish:i})=>`https://${e}/${t}/${s}/archive/${F(i)||"HEAD"}.tar.gz`,bugstemplate:({user:e,project:t})=>null,extract:e=>{let[,t,s,i]=e.pathname.split("/",4);if(!["archive"].includes(i)&&(s&&s.endsWith(".git")&&(s=s.slice(0,-4)),!(!t||!s)))return{user:t,project:s,committish:e.hash.slice(1)}}};for(let[e,t]of Object.entries(ut))ut[e]=Object.assign({},cs,t);_e.exports=ut});var fe=St((zs,Ne)=>{var ls=H("url"),he=(e,t,s)=>{let i=e.indexOf(s);return e.lastIndexOf(t,i>-1?i:1/0)},Ie=e=>{try{return new ls.URL(e)}catch{}},hs=(e,t)=>{let s=e.indexOf(":"),i=e.slice(0,s+1);if(Object.prototype.hasOwnProperty.call(t,i))return e;let n=e.indexOf("@");return n>-1?n>s?`git+ssh://${e}`:e:e.indexOf("//")===s+1?e:`${e.slice(0,s+1)}//${e.slice(s+1)}`},fs=e=>{let t=he(e,"@","#"),s=he(e,":","#");return s>t&&(e=e.slice(0,s)+"/"+e.slice(s+1)),he(e,":","#")===-1&&e.indexOf("//")===-1&&(e=`git+ssh://${e}`),e};Ne.exports=(e,t)=>{let s=t?hs(e,t):e;return Ie(s)||Ie(fs(s))}});var He=St((Ws,Ce)=>{"use strict";var us=fe(),ps=e=>{let t=e.indexOf("#"),s=e.indexOf("/"),i=e.indexOf("/",s+1),n=e.indexOf(":"),o=/\s/.exec(e),a=e.indexOf("@"),l=!o||t>-1&&o.index>t,f=a===-1||t>-1&&a>t,d=n===-1||t>-1&&n>t,E=i===-1||t>-1&&i>t,g=s>0,k=t>-1?e[t-1]!=="/":!e.endsWith("/"),$=!e.startsWith(".");return l&&g&&k&&$&&f&&d&&E};Ce.exports=(e,t,{gitHosts:s,protocols:i})=>{var y,P;if(!e)return;let n=ps(e)?`github:${e}`:e,o=us(n,i);if(!o)return;let a=s.byShortcut[o.protocol],l=s.byDomain[o.hostname.startsWith("www.")?o.hostname.slice(4):o.hostname],f=a||l;if(!f)return;let d=s[a||l],E=null;((y=i[o.protocol])==null?void 0:y.auth)&&(o.username||o.password)&&(E=`${o.username}${o.password?":"+o.password:""}`);let g=null,k=null,$=null,C=null;try{if(a){let h=o.pathname.startsWith("/")?o.pathname.slice(1):o.pathname,w=h.indexOf("@");w>-1&&(h=h.slice(w+1));let A=h.lastIndexOf("/");A>-1?(k=decodeURIComponent(h.slice(0,A)),k||(k=null),$=decodeURIComponent(h.slice(A+1))):$=decodeURIComponent(h),$.endsWith(".git")&&($=$.slice(0,-4)),o.hash&&(g=decodeURIComponent(o.hash.slice(1))),C="shortcut"}else{if(!d.protocols.includes(o.protocol))return;let h=d.extract(o);if(!h)return;k=h.user&&decodeURIComponent(h.user),$=decodeURIComponent(h.project),g=decodeURIComponent(h.committish),C=((P=i[o.protocol])==null?void 0:P.name)||o.protocol.slice(0,-1)}}catch(h){if(h instanceof URIError)return;throw h}return[f,k,E,$,g,C,t]}});var Ue=St((Ms,De)=>{"use strict";var{LRUCache:ds}=Re(),ms=Le(),gs=He(),Ss=fe(),ue=new ds({max:1e3}),pt,Wt,_,D,st=class{constructor(t,s,i,n,o,a,l={}){p(this,_);Object.assign(this,r(st,pt)[t],{type:t,user:s,auth:i,project:n,committish:o,default:a,opts:l})}static addHost(t,s){r(st,pt)[t]=s,r(st,pt).byDomain[s.domain]=t,r(st,pt).byShortcut[`${t}:`]=t,r(st,Wt)[`${t}:`]={name:t}}static fromUrl(t,s){if(typeof t!="string")return;let i=t+JSON.stringify(s||{});if(!ue.has(i)){let n=gs(t,s,{gitHosts:r(st,pt),protocols:r(st,Wt)});ue.set(i,n?new st(...n):void 0)}return ue.get(i)}static parseUrl(t){return Ss(t)}hash(){return this.committish?`#${this.committish}`:""}ssh(t){return c(this,_,D).call(this,this.sshtemplate,t)}sshurl(t){return c(this,_,D).call(this,this.sshurltemplate,t)}browse(t,...s){return typeof t!="string"?c(this,_,D).call(this,this.browsetemplate,t):typeof s[0]!="string"?c(this,_,D).call(this,this.browsetreetemplate,{...s[0],path:t}):c(this,_,D).call(this,this.browsetreetemplate,{...s[1],fragment:s[0],path:t})}browseFile(t,...s){return typeof s[0]!="string"?c(this,_,D).call(this,this.browseblobtemplate,{...s[0],path:t}):c(this,_,D).call(this,this.browseblobtemplate,{...s[1],fragment:s[0],path:t})}docs(t){return c(this,_,D).call(this,this.docstemplate,t)}bugs(t){return c(this,_,D).call(this,this.bugstemplate,t)}https(t){return c(this,_,D).call(this,this.httpstemplate,t)}git(t){return c(this,_,D).call(this,this.gittemplate,t)}shortcut(t){return c(this,_,D).call(this,this.shortcuttemplate,t)}path(t){return c(this,_,D).call(this,this.pathtemplate,t)}tarball(t){return c(this,_,D).call(this,this.tarballtemplate,{...t,noCommittish:!1})}file(t,s){return c(this,_,D).call(this,this.filetemplate,{...s,path:t})}edit(t,s){return c(this,_,D).call(this,this.edittemplate,{...s,path:t})}getDefaultRepresentation(){return this.default}toString(t){return this.default&&typeof this[this.default]=="function"?this[this.default](t):this.sshurl(t)}},Tt=st;pt=new WeakMap,Wt=new WeakMap,_=new WeakSet,D=function(t,s){if(typeof t!="function")return null;let i={...this,...this.opts,...s};i.path||(i.path=""),i.path.startsWith("/")&&(i.path=i.path.slice(1)),i.noCommittish&&(i.committish=null);let n=t(i);return i.noGitPlus&&n.startsWith("git+")?n.slice(4):n},p(Tt,pt,{byShortcut:{},byDomain:{}}),p(Tt,Wt,{"git+ssh:":{name:"sshurl"},"ssh:":{name:"sshurl"},"git+https:":{name:"https",auth:!0},"git:":{auth:!0},"http:":{auth:!0},"https:":{auth:!0},"git+http:":{auth:!0}});for(let[e,t]of Object.entries(ms))Tt.addHost(e,t);De.exports=Tt});var _s={};Qt(_s,{default:()=>Ts});var Ke=H("@yarnpkg/cli"),Et=H("@yarnpkg/core"),mt=H("clipanion"),Xe=se(Ee());var b=H("@yarnpkg/core"),it=H("@yarnpkg/fslib"),Be=se(Ue());var de={};Qt(de,{fs:()=>ws,getPackagePath:()=>bs});var je=H("@yarnpkg/plugin-pnp"),Zt=H("@yarnpkg/core"),qt=H("@yarnpkg/fslib"),ze=H("@yarnpkg/libzip");var _t=()=>({os:[process.platform],cpu:[process.arch],libc:[]});var bs=async(e,t)=>{if(ys(e),!Zt.structUtils.isPackageCompatible(t,_t()))return null;let s=Zt.structUtils.convertPackageToLocator(t),i={name:Zt.structUtils.stringifyIdent(s),reference:s.reference},n=pe.getPackageInformation(i);if(!n)return null;let{packageLocation:o}=n;return o},pe,ys=e=>{pe||(pe=module.require((0,je.getPnpPath)(e).cjs))},ws=new qt.VirtualFS({baseFs:new qt.ZipOpenFS({libzip:(0,ze.getLibzipSync)(),readOnlyArchives:!0})});var me={};Qt(me,{_getYarnStateAliases:()=>Qe,fs:()=>Es,getPackagePath:()=>xs});var xt=H("@yarnpkg/core"),We=H("@yarnpkg/parsers"),dt=H("@yarnpkg/fslib");var xs=async(e,t)=>{if(await vs(e),!xt.structUtils.isPackageCompatible(t,_t()))return null;let s=xt.structUtils.convertPackageToLocator(t),i=xt.structUtils.stringifyLocator(s),n=te[i]||Me[i];if(!n)return null;let o=n.locations[0];return o?dt.ppath.join(e.cwd,o):e.cwd},te,Me,vs=async e=>{if(!te){let t=dt.ppath.join(e.configuration.projectCwd,dt.Filename.nodeModules,".yarn-state.yml");te=(0,We.parseSyml)(await dt.xfs.readFilePromise(t,"utf8")),Me=Qe(te)}},Es=dt.xfs,Qe=e=>Object.entries(e).reduce((t,[s,i])=>{if(!i.aliases)return t;let n=xt.structUtils.parseLocator(s);for(let o of i.aliases){let a=xt.structUtils.makeLocator(n,o),l=xt.structUtils.stringifyLocator(a);t[l]=i}return t},{});var ge={};Qt(ge,{fs:()=>Os,getPackagePath:()=>$s});var Mt=H("@yarnpkg/core"),vt=H("@yarnpkg/fslib");var $s=async(e,t)=>{if(!Mt.structUtils.isPackageCompatible(t,_t()))return null;let s=Mt.structUtils.convertPackageToLocator(t),i=Mt.structUtils.slugifyLocator(s),n=Mt.structUtils.stringifyIdent(s),o=e.tryWorkspaceByLocator(s);return o?o.cwd:vt.ppath.join(e.configuration.projectCwd,vt.Filename.nodeModules,".store",i,vt.Filename.nodeModules,n)},Os=vt.xfs;var Ge=e=>{switch(e){case"pnp":return de;case"node-modules":return me;case"pnpm":return ge;default:throw new Error("Unsupported linker")}};var pi=it.npath.basename(__dirname)==="@yarnpkg"?it.ppath.join(it.npath.toPortablePath(__dirname),"../.."):it.ppath.join(it.npath.toPortablePath(__dirname),".."),Ve=async(e,t,s,i,n)=>{let o={},a={children:o},l=await Ps(e,t,i,n),f=Ge(e.configuration.get("nodeLinker"));for(let[d,E]of l.entries()){let g=await f.getPackagePath(e,E);if(g===null)continue;let k=JSON.parse(await f.fs.readFilePromise(it.ppath.join(g,it.Filename.manifest),"utf8")),{license:$,url:C,vendorName:y,vendorUrl:P}=Fs(k),h=b.structUtils.convertPackageToLocator(E),w=b.structUtils.stringifyLocator(b.structUtils.isVirtualLocator(h)?b.structUtils.devirtualizeLocator(h):h),M={children:{package:{value:b.formatUtils.tuple(b.formatUtils.Type.DEPENDENT,{locator:h,descriptor:d})},...C?{url:{value:b.formatUtils.tuple(b.formatUtils.Type.NO_HINT,Se("URL",C,s))}}:{},...y?{vendorName:{value:b.formatUtils.tuple(b.formatUtils.Type.NO_HINT,Se("VendorName",y,s))}}:{},...P?{vendorUrl:{value:b.formatUtils.tuple(b.formatUtils.Type.NO_HINT,Se("VendorUrl",P,s))}}:{},license:{value:b.formatUtils.tuple(b.formatUtils.Type.NO_HINT,$)}}};o[w]=M}return a},Ye=(e,t,s,i,n,o)=>{let a=[];for(let[l,f]of s.entries())if(!(n&&t&&t.manifest.devDependencies.has(l))&&!i.includes(f)&&(a.push(f),o)){let d=e.storedResolutions.get(f.descriptorHash);if(!d)throw new Error("Assertion failed: The resolution should have been registered");let E=e.storedPackages.get(d);if(!E){console.log("Assertion failed: The package could not be found");continue}a.push(...Ye(e,null,E.dependencies,[...i,...a],n,o))}return a},Ps=async(e,t,s,i)=>{let n=new Map,o,a=t.getRecursiveWorkspaceDependencies({dependencies:i?["dependencies"]:b.Manifest.hardDependencies});if(a.add(t),o=new Set,s){let d=await b.Cache.find(e.configuration,{immutable:!0});await e.resolveEverything({report:new b.ThrowReport,cache:d})}for(let d of a)o=new Set([...Ye(e,d,d.dependencies,[...o],i,s),...o]);let l=b.miscUtils.sortMap(o,[d=>b.structUtils.stringifyIdent(d),d=>b.structUtils.isVirtualDescriptor(d)?"0":"1",d=>d.range]),f=new Set;for(let d of l.values()){let E=e.storedResolutions.get(d.descriptorHash);if(!E)continue;let g=e.storedPackages.get(E);if(!g)continue;let{descriptorHash:k}=b.structUtils.isVirtualDescriptor(d)?b.structUtils.devirtualizeDescriptor(d):d;f.has(k)||(f.add(k),n.set(d,g))}return n};function ks(e){let t={},s=e.match(/^([^(<]+)/);if(s){let o=s[0].trim();o&&(t.name=o)}let i=e.match(/<([^>]+)>/);i&&(t.email=i[1]);let n=e.match(/\(([^)]+)\)/);return n&&(t.url=n[1]),t}var Fs=e=>{let{license:t,licenses:s,repository:i,homepage:n,author:o}=e,a=typeof o=="string"?ks(o):o;return{license:(()=>{if(t)return ee(t);if(s){if(!Array.isArray(s))return ee(s);if(s.length===1)return ee(s[0]);if(s.length>1)return`(${s.map(ee).join(" OR ")})`}return Je})(),url:As(i)||n,vendorName:a==null?void 0:a.name,vendorUrl:n||(a==null?void 0:a.url)}},Je="UNKNOWN",ee=e=>(typeof e!="string"?e.type:e)||Je,As=e=>{let t=typeof e=="string"?e:e==null?void 0:e.url;if(!t)return t;let s=Be.default.fromUrl(t);return s?s.https({noGitPlus:!0}):t},Se=(e,t,s)=>s?t:`${e}: ${t}`;var Ze=se(H("fs")),Lt=class extends mt.Command{constructor(){super(...arguments);this.recursive=mt.Option.Boolean("-R,--recursive",!1,{description:"Include transitive dependencies (dependencies of direct dependencies)"});this.production=mt.Option.Boolean("--production",!1,{description:"Exclude development dependencies"});this.json=mt.Option.Boolean("--json",!1,{description:"Format output as JSON"});this.file=mt.Option.String("--out-file",{required:!1,description:"Write output to file (as json)"})}async execute(){let s=await Et.Configuration.find(this.context.cwd,this.context.plugins),{project:i,workspace:n}=await Et.Project.find(s,this.context.cwd);if(!n)throw new Ke.WorkspaceRequiredError(i.cwd,this.context.cwd);await i.restoreInstallState();let o=this.file?Ze.default.createWriteStream(this.file):this.context.stdout,a=await Ve(i,n,this.json,this.recursive,this.production);if(this.json){let l=(0,Xe.default)(JSON.stringify(Et.treeUtils.treeNodeToJson(a)));o.write(l);return}Et.treeUtils.emitTree(a,{configuration:s,stdout:o,json:!1,separators:1})}};Lt.paths=[["licenses","list"]],Lt.usage=mt.Command.Usage({description:"display the licenses for all packages in the project",details:`
      This command prints the license information for packages in the project. By default, only direct dependencies are listed.

      If \`-R,--recursive\` is set, the listing will include transitive dependencies (dependencies of direct dependencies).

      If \`--production\` is set, the listing will exclude development dependencies.
    `,examples:[["List all licenses of direct dependencies","$0 licenses list"],["List all licenses of direct and transitive dependencies","$0 licenses list --recursive"],["List all licenses of production dependencies only","$0 licenses list --production"]]});var Rs={commands:[Lt]},Ts=Rs;return os(_s);})();
/**
 * @license
 * format-to-json v3.0.3
 * GitHub Repository <https://github.com/CN-Tower/format-to-json>
 * Released under MIT license <https://github.com/CN-Tower/format-to-json/blob/master/LICENSE>
 */
return plugin;
}
};
